<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <record id="project_status_tree_view" model="ir.ui.view">
        <field name="name">Project Status</field>
        <field name="model">project.status</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Project Status">
                <field name="name"/>
                <field name="close_stage"/>
            </tree>
        </field>
    </record>
    <record id="sale_contract_form_view" model="ir.ui.view">
        <field name="name">Project Status</field>
        <field name="model">project.status</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Project Status">
                <sheet>
                    <group>
                        <group>
                            <field name="name"/>
                        </group>
                        <group>
                            <field name="close_stage"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="project_status_action" model="ir.actions.act_window">
        <field name="name">Project Status</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">project.status</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
    </record>

    <menuitem name="Project Status"
              id="project_status"
              parent="project.menu_project_config"
              action="project_status_action"
              sequence="0"/>

    <record id="project_stage_form" model="ir.ui.view">
        <field name="name">project status</field>
        <field name="model">project.project</field>
        <field name="inherit_id" ref="project.edit_project"/>
        <field name="arch" type="xml">
            <xpath expr="//header" position="inside">
                 <field name="stage_id" widget="statusbar" options="{'clickable': '1', 'fold_field': 'fold'}"  readonly="1"/>
            </xpath>
            <page name="settings" position="after">
                <page string="Team">
                    <field name="members" widget="many2many">
                        <kanban quick_create="false" create="true" delete="true">
                            <field name="id"/>
                            <field name="name"/>
                            <templates>
                                <t t-name="kanban-box">
                                    <div class="oe_kanban_global_click" style="max-width: 200px">
                                        <div class="o_kanban_record_top">
                                            <img t-att-src="kanban_image('res.users', 'image_small', record.id.raw_value)" height="40" width="40" class="oe_avatar oe_kanban_avatar_smallbox mb0"/>
                                            <div class="o_kanban_record_headings ml8">
                                                <strong class="o_kanban_record_title"><field name="name"/></strong>
                                            </div>
                                            <a t-if="! read_only_mode" type="delete" class="text-danger">
                                                <i class="fa fa-times"></i>
                                            </a>
                                        </div>
                                    </div>
                                </t>
                            </templates>
                        </kanban>
                    </field>
                </page>
            </page>
        </field>
    </record>

    <record id="view_project_project_kanban_inherit_status" model="ir.ui.view">
        <field name="name">state.project.project.kanban.inherit</field>
        <field name="model">project.project</field>
        <field name="inherit_id" ref="project.view_project_kanban"/>
        <field name="arch" type="xml">
            <field name="name" position="after">
                <field name="stage_id" invisible="1"/>
            </field>
            <xpath expr="//kanban" position="attributes">
                <attribute name="default_group_by">stage_id</attribute>
            </xpath>
        </field>
    </record>
</odoo>